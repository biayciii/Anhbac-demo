<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Anh trai say hi</title>
  <link rel="stylesheet" href="AT.css">
  <script src="https://cdn.jsdelivr.net/npm/qrious/dist/qrious.min.js"></script>
</head>
<body>
  <div class="container">
    <h2>Anh trai say hi</h2>
    <form id="ticket-form">
      <label for="ticket-type">Hạng vé</label>
      <select id="ticket-type" name="ticket-type">
        <option disabled selected>Chọn hạng vé</option>
        <option value="standard">Standard - 300.000đ</option>
        <option value="vip">VIP - 800.000đ</option>
      </select>

      <label for="seat">Chọn số ghế</label>
      <select id="seat" name="seat">
        <option disabled selected>Chọn ghế</option>
      </select>

      <label for="quantity">Số lượng vé</label>
      <input type="number" id="quantity" name="quantity" min="1" max="10" value="1" />

      <label for="email">Email nhận vé</label>
      <input type="email" id="email" name="email" placeholder="your@email.com" required />

      <label for="payment">Cổng thanh toán</label>
      <select id="payment" name="payment">
        <option disabled selected>Chọn cổng thanh toán</option>
        <option value="vnpay">VNPay</option>
        <option value="bidv">BIDV SmartBanking</option>
        <option value="momo">Momo</option>
      </select>

      <button type="submit">Thanh toán</button>
    </form>

    <div id="otp-section" style="display:none; margin-top: 20px;">
      <h3>Xác thực OTP</h3>
      <p>Chúng tôi đã gửi mã OTP đến email của bạn.</p>
      <input type="text" id="otp-code" placeholder="Nhập mã OTP">
      <button onclick="verifyOTP()">Xác nhận</button>
    </div>

    <div id="qr-code" style="display:none; margin-top: 20px;">
      <h3>Mã QR vé của bạn</h3>
      <canvas id="qrcode"></canvas>
    </div>
  </div>

  <script>
    const seatOptions = {
      standard: ['A1', 'A2', 'A3', 'A4', 'A5'],
      vip: ['B1', 'B2', 'B3', 'B4', 'B5']
    };

    document.getElementById('ticket-type').addEventListener('change', function () {
      const selectedType = this.value;
      const seatSelect = document.getElementById('seat');
      seatSelect.innerHTML = '<option disabled selected>Chọn ghế</option>';
      seatOptions[selectedType].forEach(seat => {
        const option = document.createElement('option');
        option.value = seat;
        option.textContent = seat;
        seatSelect.appendChild(option);
      });
    });

    document.getElementById('ticket-form').addEventListener('submit', function (e) {
      e.preventDefault();
      document.getElementById('otp-section').style.display = 'block';
      alert('Thanh toán thành công! Mã OTP đã được gửi đến email.');
    });

    function verifyOTP() {
      const otp = document.getElementById('otp-code').value;
      if (otp === '123456') {
        alert('Xác thực thành công!');
        document.getElementById('qr-code').style.display = 'block';

        const qr = new QRious({
          element: document.getElementById('qrcode'),
          value: `Vé: ${document.getElementById('ticket-type').value.toUpperCase()} - Ghế ${document.getElementById('seat').value} - Email: ${document.getElementById('email').value}`,
          size: 200
        });
      } else {
        alert('Sai mã OTP. Vui lòng kiểm tra lại.');
      }
    }
  </script>
</body>
</html>
